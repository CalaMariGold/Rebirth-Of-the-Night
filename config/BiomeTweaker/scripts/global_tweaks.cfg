# Makes BoP features generate in default worlds
Tweaker.removeExcludedBOPWorldType("default")

everyBiome = forAllBiomes()
everyBiome.removeDecoration("LAKE_LAVA")
everyBiome.removeDecoration("LAKE_WATER")


everyBiome.removeFeature("LAKE")
everyBiome.removeGeneratorBOP("hot_springs")

# Prevents the player from spawning in "non-friendly biomes"
forAllBiomesExcept("minecraft:plains","minecraft:forest","minecraft:birch_forest","minecraft:birch_forest_hills","minecraft:roofed_forest","minecraft:redwood_taiga","minecraft:redwood_taiga_hills","biomesoplenty:cherry_blossom_grove","biomesoplenty:grove","biomesoplenty:maple_woods","biomesoplenty:redwood_forest","biomesoplenty:seasonal_forest").set("isSpawnBiome", false)

# Biome variables
glacier = forBiomes("biomesoplenty:glacier")
vanilla_forest = forBiomes("minecraft:forest")
vanilla_birch_forest = forBiomes("minecraft:birch_forest")
vanilla_taiga = forBiomes("minecraft:taiga")
cold_mountains = forBiomes("minecraft:ice_mountains")
no_water_biomes = forBiomes("biomesoplenty:xeric_shrubland")
prairie = forBiomes("biomesoplenty:prairie")
golden_prairie = forBiomes("biomesoplenty:pasture")
lush_desert = forBiomes("biomesoplenty:lush_desert")
brushland = forBiomes("biomesoplenty:brushland")
quagmire = forBiomes("biomesoplenty:quagmire")
bog = forBiomes("biomesoplenty:bog")
higland = forBiomes("biomesoplenty:highland")
temperate_rainforest = forBiomes("biomesoplenty:temperate_rainforest")
rainforest = forBiomes("biomesoplenty:rainforest")
alps_foothills = forBiomes("biomesoplenty:alps_foothills")
alps = forBiomes("biomesoplenty:alps")
coral_reef = forBiomes("biomesoplenty:coral_reef")
flower_field = forBiomes("biomesoplenty:flower_field")
vanilla_river = forBiomes("minecraft:river")
cherry_blossom_grove = forBiomes("biomesoplenty:cherry_blossom_grove")
chaparral = forBiomes("biomesoplenty:chaparral")
eucalyptus_forest = forBiomes("biomesoplenty:eucalyptus_forest")
mangrove = forBiomes("biomesoplenty:mangrove")
overgrown_cliffs = forbiomes("biomesoplenty:overgrown_cliffs")

# Height tweaks to accomodate Y128 oceans
highland.set("height", 1.1)
temperate_rainforest.set("heightVariation", 0.515)
rainforest.set("height", 0.215)
rainforest.set("heightVariation", 0.395)
alps.set("height", 1.35)
alps.set("heightVariation", 0.2)
alps_foothills.set("height", 1.2)
alps_foothills.set("heightVariation", 0.175)
flower_field.set("height", 1.11)
flower_field.set("heightVariation", 0.023)
river.set("height", -0.38)
cherry_blossom_grove.set("height", 1.40)
cherry_blossom_grove.set("heightVariation", 0.48)
chaparral.set("height", 0.05)
chaparral.set("heightVariation", 0.5)
eucalyptus_forest.set("height", 0.3)
eucalyptus_forest.set("heightVariation", 0.01)
mangrove.set("height", -0.001)
mangrove.set("heightVariation", 0.01)
overgrown_cliffs.set("height", 1.24)
overgrown_cliffs.set("heightVariation", 0.38)

# Changes glacier top block
Tweaker.setPlacementStage("PRE_POPULATE")
glacier.registerGenBlockRep("minecraft:ice", "minecraft:packed_ice")

Tweaker.setScriptStage("FINISHED_LOAD")
# Mountain tweaks to create better slopes in tandem with custom biome mountains (functional_biomes.cfs)
# Makes vanilla ice mountains as tall as BoP mountains
cold_mountains.set("name", "Cold Mountain Peak")
cold_mountains.set("height", 2.905)
cold_mountains.set("heightVariation", 0.33)
cold_mountains.set("topBlock", "minecraft:snow")
cold_mountains.set("fillerBlock", "minecraft:gravel")
# Renames BoP mountains to be used in warm biomes
warm_mountains = forBiomes("biomesoplenty:mountain")
warm_mountains.set("name", "Warm Mountain Peak")

# Block replacements
Tweaker.setPlacementStage("PRE_POPULATE")
coral_reef.set("topBlock", "minecraft:gravel")

# Raises vanilla forests height so that they don't generate false lakes on their own (height variation only reaches down to sea level when substracted from the new height values)
vanilla_forest.set("height", 0.025)
vanilla_forest.set("heightVariation", 0.125)
vanilla_birch_forest.set("height", 0.08)
vanilla_birch_forest.set("heightVariation", 0.04)
vanilla_taiga.set("height", 0.15)
vanilla_taiga.set("heightVariation", 0.05)
cold_mountains.set("heightVariation", 0.2)
Tweaker.setStage("FINISHED_LOAD")

# Removes water from these biomes completely (remember to add higher-altitude edge biomes around these so that water bodies are not cut)
no_water_biomes.registerGenBlockRep("minecraft:water", "minecraft:air")

# Changes lush desert to have orange sand
lush_desert.set("height", 0.9)
orange_sand = forBlock("undergroundbiomes:igneous_sand")
orange_sand.setProperty("type", "red_granite")
lush_desert.set("topBlock", orange_sand)
orange_sandstone = forBlock("undergroundbiomes:igneous_sandstone")
orange_sandstone.setProperty("type", "red_granite")
lush_desert.set("fillerBlock", orange_sandstone)

# Prairie and golden prairie (pasture) color tweaks
prairie.set("grassColor", 9606732)
prairie.set("foliageColor", 9606732)
golden_prairie.set("grassColor", 9606732)
golden_prairie.set("foliageColor", 9606732)
golden_prairie.set("name", "Golden Prairie")

# Brushland renamed to Dryland
brushland.set("name", "Dryland")

# Quagmire renamed to Bog and raised to allow for more vegetation/peat
quagmire.set("name", "Bog")
quagmire.set("height", 0.119)
quagmire.set("grassColor", 13944451)
quagmire.set("foliageColor", 13944451)

# Bog renamed to Peatland Edge
bog.set("name", "Peatland Edge")